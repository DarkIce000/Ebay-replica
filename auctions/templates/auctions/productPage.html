{% extends "auctions/layout.html" %}

{% block body%}

    <!-- upper Body -->
    <!-- Product Description  -->
    

    <div class="container">
        <div class="row">

            <!-- left side  -->
            <div class="col-lg" style="height:auto"> 
                <img src="{{ product_info.imageUrl }}" alt="image" class="img-fluid rounded" style="min-width:400px" class="img-fluid">
            </div>
            
            <!-- right side -->

            <div class="col align-items-center">

            <!-- description -->
                <ul class="list-group list-group-flush">
                    <li class="list-group-item"><b> {{ product_info.product_title }}</b></li>
                    <li class="list-group-item"><b>Description: {{ product_info.description }}</b></li>
                    <li class="list-group-item"><b>Seller: </b> {{ product_info.seller}}</li>
                    <li class="list-group-item"><b>Starting Bid: </b> {{ product_info.bids.initialBid }} </li>
                    <li class="list-group-item"><b>Current Bid: </b> {{ product_info.bids.last_bid }} {{ product_info.bids.last_bidder }} </li>
                </ul>
                
            <!-- add to watchlist button  -->
                <div class="form-check">
                    <form action="{% url 'watchList' product_info.id %}" method="POST" id ="watchlistForm">

                        {% csrf_token %}
                        <label for="addToWatchlist" class="form-control-label">add to watchlist</label> 
                        <input name="addToWatchlist" type="checkbox" class="form-control" id="addToWatchlist" onclick="watchlist()" {{ is_in_watchlist }}>

                    </form>
                </div>
                <div class="form-check">

                  <form action="{% url 'bidding_view' product_info.id %}" id="biddingForm" method="POST">

                    {% csrf_token %}

                    {% if is_user %}

                      {% block Button %}
                        <input name="closeButton" type="submit" value="close" class="btn btn-primary">
                      {% endblock%}

                    {% else %}

                      {%block inputfield %}
                        <input type="number" name="biddingField" class="form-control">
                        <input type="submit" name="biddingButton" value="makeBid" class="btn btn-primary form-control">
                      {% endblock %}

                    {% endif %}

                  </form>
                </div> 
            
            </div>
        </div>

    </div>
    

    <!-- Lower Body -->

    <!-- commenting in the product page  -->


    <div class="container">
        <div class="row mt-2">

            <!-- comment mading -->
            <div class="col-lg">
                <h2 class="mt-2">Comment here </h2>
                <hr>
                <form action="{% url 'commentMade' product_info.id %}" method="POST">
                    {% csrf_token %}
                    {{formComment}} 
                    <button type="submit" class="form-control btn-primary mt-2">Post</button>
                </form>
            </div>

            <!-- comments List -->
            <div class="col-lg">
                <h2 class="mt-2">Comments So Far..</h2>
                <hr>
                <div class="list-group">
                    {% for comment in display_comments %}
                        <p>{{ comment.title }}</p>
                        <p>{{ comment.msg }}</p>
                        <hr>
                    {% endfor %}
                </div>

            <!-- commentList -->
        </div>
    </div>
    

    <!-- scripting starts from here  -->

    <script>
        
        function watchlist(){
            Form = document.getElementById("watchlistForm");
            Form.submit()
        }
    </script>
{% endblock %}
